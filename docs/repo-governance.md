# Repo Governance Decision Matrix

تاريخ المراجعة: 2026-02-09  
النطاق: فحص مراجع المستودعات في `.github/workflows/` وملفات البنية/النشر داخل هذا المستودع.

## 1) جدول القرار (Decision Matrix)

| المستودع | الهدف | المالك | بيئة النشر | آخر Release | التبعيات الإنتاجية | نتيجة المراجعة | القرار الحوكمي |
|---|---|---|---|---|---|---|---|
| `LexBANK/BSM` | مستودع التشغيل الفعلي لخدمات المنصة (API + Agents + عمليات النشر) | `@LexBANK/platform-team` | Render (`render.yaml`) + GitHub Actions | لا توجد Git tags محلية مرئية | `express`, `cors`, `helmet`, `express-rate-limit`, `node-fetch`, `pino`, `yaml` | مستخدم إنتاجيًا عبر CI/CD والنشر | **Keep Active** كمستودع التشغيل |
| `LexBANK/core-hub` | مركز تنظيمي/حوكمة ومرجع موحد للتسمية والوثائق المشتركة | `@LexBANK/platform-team` (مقترح) | GitHub-only (Docs / governance) | غير متاح من هذا المستودع | غير محدد هنا (خارج نطاق هذا الريبو) | مطلوب كهوية موحّدة للمؤسسة | **Adopt as Org Hub** |
| `LexBANK/BSU` (legacy) | تسمية قديمة/ملتبسة تاريخيًا لنفس نطاق العمل | غير موحّد | غير معتمد رسميًا | غير متاح من هذا المستودع | لا يوجد اعتماد إنتاجي مباشر هنا كـ repo target | لا توجد مراجع تشغيل مباشرة في workflows تشير للـ repo كاعتماد خارجي | **Freeze → Read-only → Archive** بعد تحديث الروابط |

## 2) نتائج فحص CI/CD والبنية التحتية

تمت مراجعة:
- `.github/workflows/*.yml`
- `render.yaml`
- `docker-compose.hybrid.yml`
- `README.md` و `docs/README.md`

### الخلاصة

1. **لا توجد مراجع تشغيل مباشرة** من workflows إلى مستودعات خارجية مثل `LexBANK/BSU` أو `LexBANK/core-hub` عبر `repository:` أو `actions/checkout` موجهة لها.  
2. المراجع الموجودة للـ `BSU` داخل workflows هي **تسميات/نصوص** (workflow names/messages) وليست روابط اعتماد runtime على مستودع آخر.  
3. الاستخدام الإنتاجي الفعلي للنشر يتم من نفس المستودع الحالي عبر Render/GitHub Actions.

## 3) تنفيذ قرارات الإيقاف/الأرشفة (When no production usage)

بناءً على الفحص المحلي، حالة `LexBANK/BSU` (legacy) هي: **لا يوجد استخدام إنتاجي مباشر كهدف مستودع**.

### إجراءات GitHub المقترحة

1. اجعل المستودع `LexBANK/BSU` **Read-only** (تعطيل push + حماية كاملة).
2. حدّث README فيه ليحمل رسالة انتقال:
   - البديل: `LexBANK/BSM` (الخدمات الفعلية)
   - البديل التنظيمي: `LexBANK/core-hub`
3. بعد التحقق من الروابط النهائية في CI/Docs، قم بـ **Archive** للمستودع legacy.

> ملاحظة: التنفيذ الفعلي لإعدادات GitHub (Read-only/Archive) يحتاج صلاحيات على المستودع الهدف، وهو خارج التعديل المحلي لهذا الريبو.

## 4) حالات الاستخدام الجزئي (Partial usage)

إذا ظهر لاحقًا أي اعتماد جزئي من legacy repos:

1. نقل الموديولات الفعالة إلى هذا المستودع ضمن `src/` أو `services/`.
2. تشغيل فترة مراقبة أسبوع (logs + CI + smoke tests).
3. بعدها إغلاق/أرشفة المستودع المصدر.

## 5) توحيد التسمية المؤسسية

- الاسم المركزي للمؤسسة: **`core-hub`**.
- مستودع التشغيل: **`BSM`**.
- إلغاء الأسماء المتقاربة غير الواضحة (خصوصًا `BSU`) من الوثائق والروابط التوجيهية تدريجيًا.

## 6) أثر التعديلات المنفذة في هذا الفرع

- إضافة هذا الملف كمرجع قرار رسمي.
- تحديث README الرئيسي للإشارة إلى التسمية المعتمدة (`BSM`/`core-hub`) بدل `BSU`.
- تحديث روابط الموارد الخارجية في `docs/README.md` إلى `LexBANK/core-hub`.
