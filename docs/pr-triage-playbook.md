# PR Triage Playbook

هذا الدليل يهدف لإنهاء تراكم Pull Requests المعلقة وتوحيد القرار عليها خلال وقت قصير.

## Labels المعتمدة

- `ready`: جاهز للدمج.
- `needs-changes`: يحتاج تعديلات قبل الدمج.
- `blocked`: متوقف بسبب اعتماد خارجي أو قرار منتج.
- `stale`: غير نشط.
- `priority-high`: أولوية عالية لا تُغلق تلقائيًا.

## قاعدة القرار خلال 72 ساعة

لكل PR مفتوح يجب تسجيل قرار واحد خلال 72 ساعة:

1. **Merge** إذا كانت الفحوصات مكتملة والمخاطر مقبولة.
2. **Request changes** إذا هناك مشاكل واضحة مع تحديد المطلوب.
3. **Close with reason** إذا التغيير لم يعد مطلوبًا أو أصبح متقادمًا.

## SLA للإصلاح

- أي PR يفشل في CI يجب أن يكون له Owner واضح.
- SLA للإصلاح: 24–48 ساعة.
- إذا تجاوز SLA بدون تحديث، انقل الحالة إلى `stale` مع تعليق يوضح السبب.

## التشغيل الآلي

يتم التعامل مع PRs غير النشطة عبر GitHub Action:

- بعد 7 أيام بدون نشاط: إضافة `stale` + تعليق تنبيهي.
- بعد 3 أيام إضافية بدون تحديث: إغلاق تلقائي.
- الاستثناءات: `blocked` و `priority-high` و `security`.

## مراجعة أسبوعية سريعة

- مراجعة جميع PRs المفتوحة حسب الأولوية: `priority-high` ثم الباقي.
- تتبّع المقاييس التالية:
  - عدد PRs المفتوحة.
  - متوسط عمر PR.
  - عدد PRs المغلقة تلقائيًا بسبب الخمول.
  - نسبة PRs المندمجة مقابل المغلقة.
